ASP.NET Core 中的中间件控制应用程序如何响应 HTTP 请求。 还可以控制应用程序在出现错误时的外观，是验证和授权用户执行特定操作的关键部分。
中间件是ASP.NET Core的核心组件，MVC框架、响应缓存、身份验证、CORS、Swagger等都是内置中间件。
###中间件的流转过程
![image.png](https://upload-images.jianshu.io/upload_images/29491970-a96563b052e4810f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

##### Map用来定义一个管道可以处理哪些请求

##### Use和Run用来定义管道

##常见的 .Net 中间件的案例有：
身份验证中间件：验证用户的身份，并在上下文中设置用户主体。
静态文件中间件：提供静态文件，如图片、CSS、JavaScript 等。
路由中间件：将请求映射到终结点，如控制器、页面、信号 R 中心等。
异常处理中间件：捕获未处理的异常，并返回友好的错误页面或响应。
日志记录中间件：记录请求和响应的详细信息，以便进行调试或分析。中间件与过滤器的区别

### 简单定义一个中间件
![image.png](https://upload-images.jianshu.io/upload_images/29491970-2faab13517e08d01.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

### 中间件类
![image.png](https://upload-images.jianshu.io/upload_images/29491970-83d35cbcb11659e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
